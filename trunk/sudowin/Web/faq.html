<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html 	PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
	<head>
		<title>Sudo for Windows</title>
		<link href="css/default.css" rel="stylesheet" type="text/css" />
		<script type="text/javascript" src="scr/default.js"></script>
	</head>
	<body onload="onPageLoad();">
		<div id="divBody">
			
			<script type="text/javascript">
				writerHeader();
			</script>
			
			<div class="divSection">
				<span class="spanSectionHeader">
					General
				</span>
				<div class="divSubSection">
					<span class="spanSubSectionHeader">
						The client keeps telling me that the Sudo server is dead to me
					</span>
					<p class="pSectionText">
						Be sure that you are in the configured Sudoers group and that you 
						have logged out and back in.  New group memberships are not 
						respected until your next logon.
					</p>
				</div>
				<div class="divSubSection">
					<span class="spanSubSectionHeader">
						The client says that the command is not allowed
					</span>
					<p class="pSectionText">
						If you are using the XmlAuthorizationPlugin check to make sure 
						that the command you are trying to invoke sudo on is in the 
						sudoers.xml file and it is enabled.  Another option is to allow
						all commands for your user.
					</p>
				</div>
				<div class="divSubSection">
					<span class="spanSubSectionHeader">
						How do I use the console client?
					</span>
					<p class="pSectionText">
						The console client binary is compiled as Sudowin.Clients.Console.exe, 
						but when Sudo for Windows is installed it renames the console client 
						to sudo.exe and adds the directory sudo.exe is in to the system's
						PATH environment variable.  This means that you can execute sudo.exe 
						from any directory in any command line interpreter.
					</p>
				</div>
				<div class="divSubSection">
					<span class="spanSubSectionHeader">
						I don't have elevated privileges after I sudo a folder
					</span>
					<p class="pSectionText">
						You need to ensure that you are launching new Explorer windows 
						as separate processes.  Otherwise when you launch a new instance 
						of Explorer it will inherit your original logon token that does 
						not have elevated privileges.
					</p>
					<p class="pSectionText">
						To configure this setting simply open an Explorer window and click 
						on "Tools->Folder Options".  Click on the "View" tab and find the 
						option "Launch folder windows in a separate process" and ensure that 
						it is checked.
					</p>
					<p class="pSectionText">
						To verify that new Explorer windows are launching as new processes 
						open up the Task Manager (Start->Run->taskmgr.exe) and sort the 
						processes by name.  Open a folder and see if a new "Explorer.exe" 
						process appears.  If it does then you are golden, otherwise you need 
						to verify that the option is checked.
					</p>
				</div>
				<div class="divSubSection">
					<span class="spanSubSectionHeader">
						It still is not working, can you help?
					</span>
					<p class="pSectionText">
						Sure.  First you need to turn on verbose logging (see below) and then 
						send me your log file.
					</p>
				</div>
			</div>
			<div class="divSection">
				<span class="spanSectionHeader">
					Upgrading
				</span>
				<div class="divSubSection">
					<span class="spanSubSectionHeader">
						0.1.0-r76 to 0.1.1-r95
					</span>
					<ol>
						<li>
							Make a copy of your sudoers.xml file.  This is located at INSTALLDIR\
							Server\sudoers.xml.
						</li>
						<li>
							Use "Add/Remove Programs" or the original installer to remove the 
							0.1.0-r76 version of Sudo for Windows.
						</li>
						<li>
							Install 0.1.1-r95.
						</li>
						<li>
							Copy your old sudoers.xml file back to INSTALLDIR\Server\sudoers.xml.
						</li>
						<li>
							Restart the Sudowin service.
						</li>
						<li>
							Add the desired users back into the Sudoers group on the local computer.
						</li>
						<li>
							Log out and back into your computer.
						</li>
						<li>
							That's it!  I hope to make this easier in the future.  The installer 
							that comes with Visual Studio .NET 2005 sucks for doing upgrade deploymnents.
						</li>
					</ol>
				</div>
			</div>
			<div class="divSection">
				<span class="spanSectionHeader">
					Debugging
				</span>
				<div class="divSubSection">
					<span class="spanSubSectionHeader">
						Turning on verbose logging
					</span>
					<p class="pSectionText">
						We need to change a setting in the sudo server's configuration file.  
						This file is located at INSTALLDIR\Server\Sudo.WindowsService.exe.config.  
						Find this line:
					</p>
					<p class="code">
						&lt;source name="traceSrc" switchValue="..."&gt;
					</p>
					<p>
						Now change the switch value to "ActivityTracing, Verbose" and restart
						the Windows service hosting the sudo server.
					</p>
				</div>
			</div>
			<script type="text/javascript">
				writeFooter();
			</script>
		</div>
	</body>
</html>